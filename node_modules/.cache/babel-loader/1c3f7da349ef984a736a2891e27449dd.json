{"ast":null,"code":"import differ from 'deep-diff'; // https://github.com/flitbit/diff#differences\n\nconst dictionary = {\n  E: {\n    color: '#2196F3',\n    text: 'CHANGED:'\n  },\n  N: {\n    color: '#4CAF50',\n    text: 'ADDED:'\n  },\n  D: {\n    color: '#F44336',\n    text: 'DELETED:'\n  },\n  A: {\n    color: '#2196F3',\n    text: 'ARRAY:'\n  }\n};\nexport function style(kind) {\n  return `color: ${dictionary[kind].color}; font-weight: bold`;\n}\nexport function render(diff) {\n  const {\n    kind,\n    path,\n    lhs,\n    rhs,\n    index,\n    item\n  } = diff;\n\n  switch (kind) {\n    case 'E':\n      return [path.join('.'), lhs, '→', rhs];\n\n    case 'N':\n      return [path.join('.'), rhs];\n\n    case 'D':\n      return [path.join('.')];\n\n    case 'A':\n      return [`${path.join('.')}[${index}]`, item];\n\n    default:\n      return [];\n  }\n}\nexport default function diffLogger(prevState, newState, logger, isCollapsed) {\n  const diff = differ(prevState, newState);\n\n  try {\n    if (isCollapsed) {\n      logger.groupCollapsed('diff');\n    } else {\n      logger.group('diff');\n    }\n  } catch (e) {\n    logger.log('diff');\n  }\n\n  if (diff) {\n    diff.forEach(elem => {\n      const {\n        kind\n      } = elem;\n      const output = render(elem);\n      logger.log(`%c ${dictionary[kind].text}`, style(kind), ...output);\n    });\n  } else {\n    logger.log('—— no diff ——');\n  }\n\n  try {\n    logger.groupEnd();\n  } catch (e) {\n    logger.log('—— diff end —— ');\n  }\n}","map":{"version":3,"sources":["/Users/user/Desktop/robofriends/node_modules/redux-logger/src/diff.js"],"names":["differ","dictionary","E","color","text","N","D","A","style","kind","render","diff","path","lhs","rhs","index","item","join","diffLogger","prevState","newState","logger","isCollapsed","groupCollapsed","group","e","log","forEach","elem","output","groupEnd"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,WAAnB,C,CAEA;;AACA,MAAMC,UAAU,GAAG;AACjBC,EAAAA,CAAC,EAAE;AACDC,IAAAA,KAAK,EAAE,SADN;AAEDC,IAAAA,IAAI,EAAE;AAFL,GADc;AAKjBC,EAAAA,CAAC,EAAE;AACDF,IAAAA,KAAK,EAAE,SADN;AAEDC,IAAAA,IAAI,EAAE;AAFL,GALc;AASjBE,EAAAA,CAAC,EAAE;AACDH,IAAAA,KAAK,EAAE,SADN;AAEDC,IAAAA,IAAI,EAAE;AAFL,GATc;AAajBG,EAAAA,CAAC,EAAE;AACDJ,IAAAA,KAAK,EAAE,SADN;AAEDC,IAAAA,IAAI,EAAE;AAFL;AAbc,CAAnB;AAmBA,OAAO,SAASI,KAAT,CAAeC,IAAf,EAAqB;AAC1B,SAAQ,UAASR,UAAU,CAACQ,IAAD,CAAV,CAAiBN,KAAM,qBAAxC;AACD;AAED,OAAO,SAASO,MAAT,CAAgBC,IAAhB,EAAsB;AAC3B,QAAM;AAAEF,IAAAA,IAAF;AAAQG,IAAAA,IAAR;AAAcC,IAAAA,GAAd;AAAmBC,IAAAA,GAAnB;AAAwBC,IAAAA,KAAxB;AAA+BC,IAAAA;AAA/B,MAAwCL,IAA9C;;AAEA,UAAQF,IAAR;AACE,SAAK,GAAL;AACE,aAAO,CAACG,IAAI,CAACK,IAAL,CAAU,GAAV,CAAD,EAAiBJ,GAAjB,EAAsB,GAAtB,EAA2BC,GAA3B,CAAP;;AACF,SAAK,GAAL;AACE,aAAO,CAACF,IAAI,CAACK,IAAL,CAAU,GAAV,CAAD,EAAiBH,GAAjB,CAAP;;AACF,SAAK,GAAL;AACE,aAAO,CAACF,IAAI,CAACK,IAAL,CAAU,GAAV,CAAD,CAAP;;AACF,SAAK,GAAL;AACE,aAAO,CAAE,GAAEL,IAAI,CAACK,IAAL,CAAU,GAAV,CAAe,IAAGF,KAAM,GAA5B,EAAgCC,IAAhC,CAAP;;AACF;AACE,aAAO,EAAP;AAVJ;AAYD;AAED,eAAe,SAASE,UAAT,CAAoBC,SAApB,EAA+BC,QAA/B,EAAyCC,MAAzC,EAAiDC,WAAjD,EAA8D;AAC3E,QAAMX,IAAI,GAAGX,MAAM,CAACmB,SAAD,EAAYC,QAAZ,CAAnB;;AAEA,MAAI;AACF,QAAIE,WAAJ,EAAiB;AACfD,MAAAA,MAAM,CAACE,cAAP,CAAsB,MAAtB;AACD,KAFD,MAEO;AACLF,MAAAA,MAAM,CAACG,KAAP,CAAa,MAAb;AACD;AACF,GAND,CAME,OAAOC,CAAP,EAAU;AACVJ,IAAAA,MAAM,CAACK,GAAP,CAAW,MAAX;AACD;;AAED,MAAIf,IAAJ,EAAU;AACRA,IAAAA,IAAI,CAACgB,OAAL,CAAcC,IAAD,IAAU;AACrB,YAAM;AAAEnB,QAAAA;AAAF,UAAWmB,IAAjB;AACA,YAAMC,MAAM,GAAGnB,MAAM,CAACkB,IAAD,CAArB;AAEAP,MAAAA,MAAM,CAACK,GAAP,CAAY,MAAKzB,UAAU,CAACQ,IAAD,CAAV,CAAiBL,IAAK,EAAvC,EAA0CI,KAAK,CAACC,IAAD,CAA/C,EAAuD,GAAGoB,MAA1D;AACD,KALD;AAMD,GAPD,MAOO;AACLR,IAAAA,MAAM,CAACK,GAAP,CAAW,eAAX;AACD;;AAED,MAAI;AACFL,IAAAA,MAAM,CAACS,QAAP;AACD,GAFD,CAEE,OAAOL,CAAP,EAAU;AACVJ,IAAAA,MAAM,CAACK,GAAP,CAAW,iBAAX;AACD;AACF","sourcesContent":["import differ from 'deep-diff';\n\n// https://github.com/flitbit/diff#differences\nconst dictionary = {\n  E: {\n    color: '#2196F3',\n    text: 'CHANGED:',\n  },\n  N: {\n    color: '#4CAF50',\n    text: 'ADDED:',\n  },\n  D: {\n    color: '#F44336',\n    text: 'DELETED:',\n  },\n  A: {\n    color: '#2196F3',\n    text: 'ARRAY:',\n  },\n};\n\nexport function style(kind) {\n  return `color: ${dictionary[kind].color}; font-weight: bold`;\n}\n\nexport function render(diff) {\n  const { kind, path, lhs, rhs, index, item } = diff;\n\n  switch (kind) {\n    case 'E':\n      return [path.join('.'), lhs, '→', rhs];\n    case 'N':\n      return [path.join('.'), rhs];\n    case 'D':\n      return [path.join('.')];\n    case 'A':\n      return [`${path.join('.')}[${index}]`, item];\n    default:\n      return [];\n  }\n}\n\nexport default function diffLogger(prevState, newState, logger, isCollapsed) {\n  const diff = differ(prevState, newState);\n\n  try {\n    if (isCollapsed) {\n      logger.groupCollapsed('diff');\n    } else {\n      logger.group('diff');\n    }\n  } catch (e) {\n    logger.log('diff');\n  }\n\n  if (diff) {\n    diff.forEach((elem) => {\n      const { kind } = elem;\n      const output = render(elem);\n\n      logger.log(`%c ${dictionary[kind].text}`, style(kind), ...output);\n    });\n  } else {\n    logger.log('—— no diff ——');\n  }\n\n  try {\n    logger.groupEnd();\n  } catch (e) {\n    logger.log('—— diff end —— ');\n  }\n}\n"]},"metadata":{},"sourceType":"module"}